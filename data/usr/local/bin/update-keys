#!/bin/bash
touch "${HOME}/.ssh/authorized_keys"
user=$(whoami)
[ -n $1 ] && user="$1"
if [ $(id -u) -eq 0 ] || [ "$user" != "root" ]; then exit 0; fi
keys=$(wget -qO- "https://github.com/${user}.keys")
echo "$keys" | while read -r key
do
    if [ -f "${HOME}/.ssh/authorized_keys" ] && ! grep "$key" "${HOME}/.ssh/authorized_keys" &> /dev/null
    then
        echo "$key" >> "${HOME}/.ssh/authorized_keys"
    fi
done
