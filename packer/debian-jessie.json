{
	"builders": [
		{
			"type": "virtualbox-iso",
			"virtualbox_version_file": ".vbox_version",
			"vm_name": "packer-debian-dev-image",
			"output_directory": "dist/debian-developer-image",
			"headless": true,
			"hard_drive_interface": "sata",
			"disk_size": 65536,
			"vboxmanage": [
				["modifyvm", "{{.Name}}", "--memory", "1024"],
				["modifyvm", "{{.Name}}", "--accelerate3d", "on"]
			],
			"guest_additions_path": "VBoxGuestAdditions_{{.Version}}.iso",
			"guest_os_type": "Debian_64",
			"http_directory": "http",
			"iso_checksum": "e9cb144e486409b2ea1454dceae8d46e0ebab88435cf0b6e7a18f3aa3a51c538",
			"iso_checksum_type": "sha256",
			"iso_url": "http://cdimage.debian.org/debian-cd/8.6.0/amd64/iso-cd/debian-8.6.0-amd64-CD-1.iso",
			"boot_command": [
				"<esc><wait>",
				"install",
				" auto",
				" url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/debian/preseed.cfg",
				" debian-installer=en_US",
				" locale=en_US",
				" keymap=us",
				" netcfg/get_hostname=vagrant",
				" netcfg/get_domain=vm ",
				"<enter>"
			],
			"ssh_port": 22,
			"ssh_wait_timeout": "15m",
			"ssh_username": "vagrant",
			"ssh_password": "vagrant",
			"shutdown_command": "echo 'vagrant' | sudo -S shutdown -h now"
		}
	],
	"provisioners": [
		{
			"type": "file",
			"source": "../debian-jessie.sh",
			"destination": "/tmp/debian-jessie.sh"
		},
		{
			"type": "shell",
			"environment_vars": [
				"username=cdelorme",
				"password=cdelorme"
			],
			"inline": "echo 'vagrant'|env {{.Vars}} sudo -S bash /tmp/debian-jessie.sh"
		}
	],
	"post-processors": [
		{
			"type": "vagrant",
			"output": "dist/debian-developer-image.box"
		}
	]
}